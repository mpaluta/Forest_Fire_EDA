---
title: "Forest_Fire_Initial"
author: "Debalina Maiti, Mark Paluta, Tina Agarwal, Vivek Agarwal"
date: "5/24/2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

This analysis is motivated by the following research question:

\begin{center}
What factors lead to particularly damaging forest fires?
\end{center}

## Setup

First, we load the car library, which gives us a convenient scatterplotMatrix function.

```{r car}
library(car)
```

```{r, results='hide'}
# Load the data 
read.csv("forestfires.csv")
forest_fire = read.table("forestfires.csv", header=TRUE, sep=",", na.string = "na")
```

## Data Overview


```{r shape}
nrow(forest_fire)
str(forest_fire)
# forest_fire
```

# Data Arrangement
===================
We will try to make different type of data transformations for our analysis

#ff_level
We will add a new column called 'level', to the data frame. And will name this new data frame as ff_level
This level column will contain the value: high, medium and low
For the rows with area = 0, we will populate the level value as 'low'
For the rows with 0 < area < 12.85, we will populate the level value as 'medium'
For the rows with area >= 12.85, we will populate the level value as 'high'
#--

```{r}

## Case High

case_high = subset(forest_fire, 12.85<=forest_fire$area &!is.na(forest_fire$area))
case_high["level"]<- "high"

nrow(case_high)##high count = 76

## Case Medium

case_medium = subset(forest_fire, 0<forest_fire$area & forest_fire$area<12.85 &!is.na(forest_fire$area))
case_medium["level"]<- "medium"

nrow(case_medium)##medium count = 194

## Case Low

case_low = subset(forest_fire, forest_fire$area==0 &!is.na(forest_fire$area))
case_low["level"]<- "low"

nrow(case_low)##low count = 247

###Merge all three to ff_level

ff_level = merge(case_high, case_medium, all = TRUE)
ff_level = merge(case_low, ff_level, all = TRUE)

####Logerithm - looking at the data against area we see that there are huge number of data with value zero. So will replace area value with log(area) value
#
ff_level$area = log(ff_level$area)
str(ff_level)
```

<!-- #Plot X, Y  -->
<!-- ```{r} -->
<!-- plot(jitter(ff_level$X, factor=2),jitter(ff_level$Y, factor=2 ), col = factor(ff_level$level)) -->
<!-- legend(1, legend=levels(factor(ff_level$level)), col= factor(ff_level$level)) -->
<!-- legend=levels(ff_level$level) -->
<!-- ``` -->

# Area

Area appears to be right-skewed. A log transformation helps normalize the data.

```{r}
forest_fire$logArea = log(forest_fire$area)
hist(forest_fire$area)
hist(forest_fire$logArea)
```

# Spatial coordinates

The X and Y coordinates have no missing values.

```{r}
sum(is.na(forest_fire$X))
sum(is.na(forest_fire$Y))
```

# test

Plotting the coordinates on a grid, we can see that some areas of the grid are densely populated with data and other areas are sparse. The colors represent size of the fire.

```{r}
# filler - define a factor for category of fire
forest_fire$fire_size <- cut(forest_fire$area, breaks=3, labels=c('Low','Medium','High'))
plot(jitter(forest_fire$X), jitter(forest_fire$Y), col=forest_fire$fire_size)
legend(1,9,unique(forest_fire$fire_size),col=1:length(forest_fire$fire_size),pch=1)
```

# Month

A histogram shows that most of the data comes from spring and summer months. We can use box plots of month and log of area to see the distributions of burned area by month.

```{r}
forest_fire$month = factor(forest_fire$month,levels(forest_fire$month)[c(5,4,8,1,9,7,6,2,12,11,10,3)])
barplot(table(forest_fire$month))
library(ggplot2)
ggplot(data = forest_fire, aes(x = month, y = logArea)) + geom_boxplot(aes(fill = logArea), width = 0.8) + theme_bw()
```
